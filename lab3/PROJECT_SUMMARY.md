# Лабораторная работа 3 - Расширенный SMTP клиент

Этот проект содержит реализацию расширенного SMTP клиента на языке C, который соответствует всем указанным требованиям, включая поддержку TLS/SSL, MIME вложений и расширенный интерфейс командной строки:

## Файлы проекта

- `smtp_client.c` - Основная реализация с парсингом командной строки
- `smtp_utils.c/h` - Основная функциональность SMTP
- `mime_utils.c/h` - Создание MIME сообщений и обработка вложений
- `tls_utils.c/h` - Поддержка TLS/SSL с OpenSSL
- `Makefile` - Для сборки с помощью `make`
- `build.sh` - Скрипт сборки для компиляции и примеров
- `tests/` - Каталог с тестами для каждой функциональности
- `README.md` - Документация и инструкции по использованию

## Реализованные расширенные функции

1. **Расширенный интерфейс командной строки**
   - Поддержка опций GNU-style
   - Гибкий парсинг аргументов с getopt
   - Поддержка нескольких вложений
   - Подробный вывод режима verbose

2. **Поддержка TLS/SSL**
   - Реализация STARTTLS для порта 587
   - Интеграция OpenSSL для безопасного соединения
   - Поддержка аутентификации AUTH LOGIN/PLAIN
   - Поддержка как обычного SMTP (порт 25), так и SMTP+TLS (порт 587)

3. **MIME вложения**
   - Создание сообщений multipart/mixed
   - Кодирование вложений в base64
   - Поддержка различных типов файлов (изображения, документы)
   - Правильные MIME-заголовки и границы
   - Обработка больших файлов

4. **Модульная архитектура**
   - Разделение ответственности между несколькими модулями
   - Повторно используемые утилиты
   - Чистые интерфейсы API

5. **Надежная обработка ошибок**
   - Комплексная проверка ошибок на всех уровнях
   - Освобождение ресурсов во всех сценариях
   - Валидация входных данных (адреса email, файлы)
   - Индикация прогресса для больших файлов

## Использование

В WSL/Linux:

Для подробного руководства по использованию см. файл `USAGE_GUIDE_RU.md` в корневом каталоге проекта.
```bash
chmod +x build.sh
./build.sh

# Примеры:
./smtp_client -s smtp.mail.ru -p 25 -f sender@mail.ru -t recipient@mail.ru -j "Test" -b "Hello"

./smtp_client -s smtp.gmail.com -p 587 --tls -l user@gmail.com -w "pass" -f user@gmail.com -t recipient@mail.ru -j "TLS Test" -b "Secure message"

./smtp_client -s smtp.yandex.ru -p 587 --tls -l your_email@yandex.ru -w "your_app_password" -f your_email@yandex.ru -t recipient@example.com -j "Files" -b "See attachments" -a document.pdf -a photo.jpg

# ВАЖНО: Для работы с реальными SMTP-серверами (Gmail, Yandex, Mail.ru) необходимо:
# - Использовать действительный email-адрес и пароль приложения (не обычный пароль)
# - Включить в настройках безопасности разрешение на использование ненадежных приложений
# - Убедиться, что файлы вложений существуют в текущей директории
```

## Соответствие требованиям

Эта реализация соответствует RFC 5321 для SMTP протокола и RFC 2045-2049 для MIME стандартов. Готова к немедленному использованию в WSL/Linux средах с поддержкой OpenSSL.